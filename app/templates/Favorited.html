{% extends "layout.html" %}
{% block content %}
<main class="main-content" style="min-height: 100vh; width: calc(100vw - 220px); display: block;">
  <div class="catalogue-wrapper">
    <h1 class="page-title">Favorited</h1>

    <div class="featured-grid">
      {% for item in shows %}
        {% if item['media_type'] == 'movie' %}
          <a href="{{ url_for('view_movie', movie_id=item['tmdb_id']) }}" class="history-item-card">
        {% elif item['media_type'] == 'tv' %}
          <a href="{{ url_for('get_media', media_id=item['tmdb_id']) }}" class="history-item-card">
        {% elif item['media_type'] == 'anime' %}
          <a href="{{ url_for('view_anime', anime_id=item['anilist_id']) }}" class="history-item-card">
        {% endif %}

            <div class="history-card-inner">
              <img src="{{ item['poster_url'] or item['cover_url'] }}" alt="{{ item['title'] or item['title_english'] }}">
              <div class="history-card-info-bar">
                <p class="media-title">{{ item['title'] or item['title_english'] }}</p>
                <div class="history-card-meta" style="justify-content: space-between;">
                  <span class="media-type-badge">{{ item['media_type'].replace('_', ' ').title() }}</span>
                  <button class="star-button" data-show-id="{{ item['anilist_id'] if item['media_type'] == 'anime' else item['tmdb_id'] }}">
                    {% if (item['anilist_id'] if item['media_type'] == 'anime' else item['tmdb_id']) in user_favorites %}
                      ⭐
                    {% else %}
                      ☆
                    {% endif %}
                  </button>
                </div>
              </div>
            </div>
          </a>
      {% endfor %}

      {% if shows|length == 0 %}
        <p class="no-history-message">No favorited items.</p>
      {% endif %}
    </div>
  </div>
</main>


{% endblock content %}
{% block scripts %}
  <script src="{{ url_for('static', filename='scripts/time.js') }}"></script>
  <script src="{{ url_for('static', filename='scripts/favorites.js') }}"></script>
{% endblock %}


